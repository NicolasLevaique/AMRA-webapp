<ion-view title="Create a path">


    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
    <!--  <ion-content class="has-header">
      <ion-list>
        <ion-item ng-repeat="playlist in playlists" href="#/app/playlists/{{playlist.id}}">
          {{playlist.title}}
        </ion-item>
      </ion-list>
    </ion-content>
  -->


    <ion-content class="has-header"  scrollbar-x="true" padding="true">
        <div ng-show="user.isConnected" class="card">
            <div class="item item-text-wrap">
                Welcome, {{user.name}}
            </div>
        </div>



        <div class="card">
            <div class="list">
                <div class="item item-divider">Informations about the new path</div>
                <div class="item item-text-wrap">
                <form name="form" novalidate class="simple-form">
                    <label class="item item-input item-stacked-label">
                        <span class="input-label">Name:</span>
                        <input type="text" ng-model="path.name" placeholder="Name of your path"required >
                    </label>
                    <label class="item item-input item-stacked-label">
                        <span class="input-label">Description :</span>
                        <input type="text" ng-model="path.description" placeholder="Enter a short description">
                    </label>
                </form>
                    </div>
                    <div class="item">
                    <button class="button icon-left ion-plus-round button-light"
                            ng-disabled="form.$invalid"
                            ng-click="addCheckpoint()">Add your first Checkpoint</button>
                </div>
            </div>

        </div>
        <div class="card" ng-repeat="checkpoint in path.checkpoints" on-finish-render>
            <div class="item item-divider"> Checkpoint {{$index}}</div>
            <div class="item item-text-wrap">
                <form name="form" novalidate class="simple-form">
                    <label class="item item-input item-stacked-label">
                        <span class="input-label">Name:</span>
                        <input type="text" ng-model="checkpoint.name"  placeholder="Name of this checkpoint" required />
                    </label>
                    <label class="item item-input item-stacked-label">
                        <span class="input-label">Description:</span>
                        <input type="text" ng-model="checkpoint.description" placeholder="Description of this checkpoint" required/>
                    </label>
                    <label class="item-stacked-label"><span class="input-label">Position:</span></label>
                    <label class="item item-input ">
                        <i class="icon ion-search placeholder-icon"></i>
                        <input type="text" id={{"autocomplete"+$index}}
                               ng-model="checkpoint.position" placeholder="Search for the position" required/>

                    </label>
                </form>
            </div>
            <div class="item">
                <button class="button icon-left ion-paper-airplane button-light"
                        ng-click="publishPath()"
                        ng-disabled="form.$invalid ">Publish your path now</button>
                <button class="button icon-left ion-plus-round button-light"
                        ng-click="addCheckpoint()">Add a New Checkpoint</button>
            </div>
        </div>
        <br/><br/><br/>
    </ion-content>
</ion-view>
